openapi: 3.0.0
info:
  version: '1.0'
  title: "Daytrip API collection"
  description: Daytrip API collection. For each endpoint there is the prefix of the relative service
  license:
    name: TO BE DECIDED

paths:
  /air_pollution_api_adapter/api/v1/air_pollution_info: 
    get:
      description: >-
        Gets air pollution info
      summary: Get air pollution
      parameters:
        - name: lat
          in: query
          required: true
          description: 'lat of the area considered'
        - name: lon
          in: query
          required: true
          description: 'lon of the area considered'
      responses:
        '200':
          description: 'The air pollution info are retrieved'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Air pollution info retrieved successfully'
                  data:
                    type: object
                    properties:
                      airPollution:
                        $ref: '#/components/schemas/AirPollution'
        '400':
          description: 'Some parameters are missing (e.g lon)'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon:
                        type: string
                        default: 'lon is required'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
                    
  /crowd_api_adapter/api/v1/crowds: 
    get:
      description: >-
        Gets currentSpeed and freeFlowSpeed of a certain street
      summary: Get Crowd
      parameters:
        - name: lat
          in: query
          required: true
          description: 'lat of the street considered'
        - name: lon
          in: query
          required: true
          description: 'lon of the street considered'
      responses:
        '200':
          description: 'Crowd information retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Crowd information retrieved successfully'
                  data:
                    type: object
                    properties:
                      crowd:
                        $ref: '#/components/schemas/Crowd'
        '400':
          description: 'Error retrieving the crowd, missing some parameters (e.g. "lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon is required'
        '400':
          description: 'Error retrieving the crowd, some parameters have a wrong format (e.g. "lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon must have a valid value (between -180 and 180)'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'

  /destination_db_adapter/api/v1/destinations: 
    post:
      description: >-
        Creates a new destination in the system. 
        (You need to be an authenticated ADMIN to access this endpoint)
      summary: Create a new destination
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Destination'

      responses:
        '201':
          description: 'The created destination'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Destination added successfully'
                  data:
                    type: object
                    properties:
                      destination:
                        $ref: '#/components/schemas/Destination'
        '400':
          description: 'Error creating a destination, some parameters are missing (e.g. "lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon is required'
        '400':
          description: 'Error creating a destination, some parameters have a wrong format (e.g. "lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon must have a valid value (between -180 and 180)'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
    get:
      description: >-
        Gets all the destinations
      summary: Get destinations
      parameters:
        - name: page
          in: query
          required: false
          description: 'Pagination parameter to compute offset'
        - name: limit
          in: query
          required: false
          description: 'Pagination parameter to compute limit'
      responses:
        '200':
          description: 'The destinations are retrieved'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Destinations retrieved successfully'
                  data:
                    type: object
                    properties:
                      destinations:
                        type: array
                        items:
                          $ref: '#/components/schemas/Destination'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'

    delete:
      description: >-
        Deletes all the destinations.
      summary: Delete all the destination
      responses:
        '200':
          description: "All the destinations are deleted"
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Destinations deleted successfully'
                  data:
                    default: null
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'

  /destination_db_adapter/api/v1/destinations/{id}:
    get:
      description: >-
        Gets the destination with the specified id
      summary: Get destination
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID of the destination to retrieve'

      responses:
        '200':
          description: 'The destination is retrieved'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Destination retrieved successfully'
                  data:
                    type: object
                    properties:
                      destination:
                        $ref: '#/components/schemas/Destination'
        '404':
          description: 'Not found Destination with id={id}'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 404
                  message:
                    type: string
                    default: 'Not found Destination with id={id}'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
    put:
      description: >-
        Updates a specific destination, changing properties like its name, the description, the image_url
        and the coordinates object. In the request, must be sent all the fields, even the unchanged ones.
      summary: Update destination
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Destination'
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID of the destination to modify'

      responses:
        '200':
          description: "The destination is updated"
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Destination updated successfully'
                  data:
                    default: null
        '400':
          description: 'Error updating a destination, some parameters are missing (e.g. "lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon is required'
        '400':
          description: 'Error updating a destination, some parameters have a wrong format (e.g. "lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon must have a valid value (between -180 and 180)'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
        '404':
          description: 'Cannot update Destination with id={id}. Maybe Destination was not found'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 404
                  message:
                    type: string
                    default: 'Cannot update Destination with id={id}. Maybe Destination was not found'

    delete:
      description: >-
        Deletes a destination.
      summary: Delete a destination
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID of the destination to delete'
      responses:
        '200':
          description: "The destination is deleted"
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Destination deleted successfully'
                  data:
                    default: null
        '404':
          description: 'Cannot delete Destination with id={id}. Maybe Destination was not found'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 404
                  message:
                    type: string
                    default: 'Cannot delete Destination with id={id}. Maybe Destination was not found'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'

  
  /emailcheck_api_adapter/api/v1/email_checks: 
    get:
      description: >-
        Gets information about a given email address
      summary: Get information about a given email address
      parameters:
        - name: email
          in: query
          required: true
          description: 'email to check'
      responses:
        '200':
          description: 'The email check is retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Email check retrieved successfully'
                  data:
                    type: object
                    properties:
                      email_check:
                        $ref: '#/components/schemas/Email_check'
        '400':
          description: 'The email parameter is missing'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      email:
                        type: string
                        default: 'email not found'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /forecast_api_adapter/api/v1/forecasts: 
    get:
      description: >-
        Gets forecast information about a given area
      summary: Get forecast information about a given area
      parameters:
        - name: lat
          in: query
          required: true
          description: 'lat of the area'
        - name: lon
          in: query
          required: true
          description: 'lon of the area'
        - name: date
          in: query
          required: true
          description: 'date of the forecast information'
        - name: begin_hour
          in: query
          required: false
          description: 'begin_hour of the forecast information'
        - name: end_hour
          in: query
          required: false
          description: 'end_hour of the forecast information'

      responses:
        '200':
          description: 'The forecast info are retrieved'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Forecast retrieved successfully'
                  data:
                    type: object
                    properties:
                      forecast:
                        $ref: '#/components/schemas/Forecast'
        '400':
          description: 'Some parameters are missing (e.g. date)'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      date:
                        type: string
                        default: 'date is required'

        '400':
          description: 'Some parameters have a wrong format (e.g. date)'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      date:
                        type: string
                        default: 'date must have a valid format (YYYY-MM-DD)'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /geocoding_api_adapter/api/v1/geocodes: 
    get:
      description: >-
        Gets the conversion between the name of an area and its coordinates
      summary: Get the conversion between the name of an area and its coordinates
      parameters:
        - name: address
          in: query
          required: true
          description: 'address of the location'

      responses:
        '200':
          description: 'Geocode retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Geocode retrieved successfully'
                  data:
                    type: object
                    properties:
                      geocode:
                        $ref: '#/components/schemas/Geocode'
        '400':
          description: 'the address parameter is missing'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      address:
                        type: string
                        default: 'address not found'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /ip_api_adapter/api/v1/ip_info: 
    get:
      description: >-
        Gets the conversion between an IP address and its location
      summary: Get the conversion between an IP address and its location
      parameters:
        - name: ip_address
          in: query
          required: true
          description: 'ip_address of the location'

      responses:
        '200':
          description: 'Ip info retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Ip info retrieved successfully'
                  data:
                    type: object
                    properties:
                      ip_info:
                        $ref: '#/components/schemas/Ip_info'
        '400':
          description: 'the ip_address parameter is missing'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      address:
                        type: string
                        default: 'ip_address is required'
        '400':
          description: 'the ip_address parameter has a wrong format'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      address:
                        type: string
                        default: 'ip_address is invalid'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /range_api_adapter/api/v1/ranges: 
    get:
      description: >-
        Gets the polygon that limits the area that can be traveled in a given time starting from a given location
      summary: Get the polygon that limits the area that can be traveled in a given time starting from a given location
      parameters:
        - name: lat
          in: query
          required: true
          description: 'lat of the location'
        - name: lon
          in: query
          required: true
          description: 'lon of the location'
        - name: timeBudgetInSec
          in: query
          required: false
          description: 'timeBudgetInSec at disposition'


      responses:
        '200':
          description: 'Range retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Range retrieved successfully'
                  data:
                    type: object
                    properties:
                      range:
                        $ref: '#/components/schemas/Range'
                        
        '400':
          description: 'some parameters are missing (e.g. lon)'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      address:
                        type: string
                        default: 'lon is required'
        '400':
          description: 'some parameters have a wrong format (e.g. lon)'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      address:
                        type: string
                        default: 'lon must have a valid value (between -180 and 180)'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /user_db_adapter/api/v1/users: 
    post:
      description: >-
        Creates a new user in the system.
      summary: Create a new user in the system.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'

      responses:
        '201':
          description: 'The created user'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'User added successfully'
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '400':
          description: 'Error creating a user, some parameters are missing(e.g. "name")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'name is required'
        '400':
          description: 'Error creating a user, some parameters have a wrong format (e.g. "coordinates.lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon must have a valid value (between -180 and 180)'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
    get:
      description: >-
        Gets all users
      summary: Get all users
      parameters:
        - name: page
          in: query
          required: false
          description: 'Pagination parameter to compute offset'
        - name: limit
          in: query
          required: false
          description: 'Pagination parameter to compute limit'
        - name: email
          in: query
          required: false
          description: 'parameter to filter users by email'
      responses:
        '200':
          description: 'Users are retrieved'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Users retrieved successfully'
                  data:
                    type: object
                    properties:
                      users:
                        type: array
                        items:
                          $ref: '#/components/schemas/User'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'

    delete:
      description: >-
        Deletes all the users.
      summary: Delete all the users
      responses:
        '200':
          description: "All the users are deleted"
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Users deleted successfully'
                  data:
                    default: null
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'

  /user_db_adapter/api/v1/users/{id}:
    get:
      description: >-
        Gets the user with the specified id
      summary: Get user
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID of the user to retrieve'
      responses:
        '200':
          description: 'The user is retrieved'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'User retrieved successfully'
                  data:
                    type: object
                    properties:
                      user:
                        $ref: '#/components/schemas/User'
        '404':
          description: 'Not found User with id={id}'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 404
                  message:
                    type: string
                    default: 'Not found User with id={id}'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
    put:
      description: >-
        Updates a specific user, changing properties like its name, the surname, the email, the password,
        the origin_name and the coordinates object. In the request, must be sent all the fields, even the unchanged ones.
      summary: Update user
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID of the user to update'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '200':
          description: "The user is updated"
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'User updated successfully'
                  data:
                    default: null
        '400':
          description: 'Error updating a user, some parameters are missing (e.g. "coordinates.lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon is required'
        '400':
          description: 'Error updating a user, some parameters have a wrong format (e.g. "coordinates.lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon must have a valid value (between -180 and 180)'
        '404':
          description: 'Cannot update User with id={id}. Maybe User was not found'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 404
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'Cannot update User with id={id}. Maybe User was not found'
                        
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'

    delete:
      description: >-
        Deletes a user.
      summary: Delete a user
      parameters:
        - name: id
          in: path
          required: true
          description: 'ID of the user to delete'
      responses:
        '200':
          description: "The user is deleted"
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'User deleted successfully'
                  data:
                    default: null
        '404':
          description: 'Could not delete the User with id={id}'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 404
                  message:
                    type: string
                    default: 'Could not delete the User with id={id}'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'

  /coordinates_rating_service/api/v1/ratings: 
     get:
      description: >-
        Gets a rating associated on how much a place could be enjoyable taking into account the weather info, the traffic and the air quality
      summary: Get rating
      parameters:
        - name: lat
          in: query
          required: true
          description: 'lat of the place considered'
        - name: lon
          in: query
          required: true
          description: 'lon of the place considered'
        - name: hour
          in: query
          required: false
          description: 'hour used in order to get meteorological informations'
        - name: date
          in: query
          required: true
          description: 'date of the meteorological informations'

      responses:
        '200':
          description: 'Rating retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Rating retrieved successfully'
                  data:
                    type: object
                    properties:
                      rating:
                        $ref: '#/components/schemas/Rating'
        '400':
          description: 'Error obtaining a rating, some parameters are missing (e.g. "coordinates.lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon is required'
        '400':
          description: 'Error obtaining a rating, some parameters have a wrong format (e.g. "coordinates.lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon must have a valid value (between -180 and 180)'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /coordinates_service/api/v1/coordinates: 
     get:
      description: >-
        Converts a location name to its coordinates
      summary: Get coordinates from location
      parameters:
        - name: location_name
          in: query
          required: true
          description: 'location_name of the place considered'
       

      responses:
        '200':
          description: 'Coordinates retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Coordinates retrieved successfully'
                  data:
                    type: object
                    properties:
                      coordinates:
                        type: object
                        properties:
                          lat:
                            type: string
                            default: '45'
                          lon:
                            type: string
                            default: '50'
        '400':
          description: 'Error obtaining the coordinates, some parameters are missing(e.g. "coordinates.lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon is required'
        '400':
          description: 'Error obtaining the coordinates, some parameters have a wrong format (e.g. "coordinates.lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon must have a valid value (between -180 and 180)'
        
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /reachable_destinations_service/api/v1/destinations/reachable: 
    get:
      description: >-
        Gets destinations reachable from a starting point in a certain amount of time
      summary: Get destinations reachable from a starting point in a certain amount of time
      parameters:
        - name: lat
          in: query
          required: true
          description: 'lat of the origin point'
        - name: lon
          in: query
          required: true
          description: 'lon of the origin point'
        - name: timeBudgetInSec
          in: query
          required: true
          description: 'time budget available'

      responses:
        '200':
          description: 'Destinations reachable from the origin retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Destinations reachable from the origin retrieved successfully'
                  data:
                    type: object
                    properties:
                      destinations:
                        type: array
                        items:
                          $ref: '#/components/schemas/Destination'
        '400':
          description: 'Error obtaining the destinations, some parameters are missing(e.g. "lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon is required'
        '400':
          description: 'Error obtaining the destinations, some parameters have a wrong format (e.g. "lon")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'lon must have a valid value (between -180 and 180)'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /valid_email_service/api/v1/email_checks/valid: 
     get:
      description: >-
        Check if mail is existing and if it's not categorized as spam,
      summary: Get mail informations
      parameters:
        - name: email
          in: query
          required: true
          description: 'email  considered'
       

      responses:
        '200':
          description: 'Email check retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Email check retrieved successfully'
                  data:
                    type: object
                    properties:
                      coordinates:
                        type: object
                        properties:
                          email:
                            type: string
                            default: 'lv@example.com'
                          valid:
                            type: string
                            default: 'True'
        '400':
          description: 'email is required'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'email is required'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /best_destinations_service/api/v1/destinations/best: 
    get:
      description: >-
        Gets all the destinations reachable from an address in a certain amount of time
      summary: Get all the destinations reachable from an address in a certain amount of time
      parameters:
        - name: address
          in: query
          required: true
          description: 'address of the origin'
        - name: date
          in: query
          required: true
          description: 'date of the daytrip'
        - name: timeBudgetInHur
          in: query
          required: true
          description: 'time budget available'

      responses:
        '200':
          description: 'Best destinations retrieved successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Best destinations retrieved successfully'
                  data:
                    type: object
                    properties:
                      destinations:
                        type: array
                        items:
                          $ref: '#/components/schemas/Destination'
        '400':
          description: 'Error obtaining the destinations, some parameters are missing(e.g. "address")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'address is required'
        '400':
          description: 'Error obtaining the destinations, some parameters have a wrong format (e.g. "date")'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      lon: 
                        type: string
                        default: 'date must be between today and next 14 days'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
  /user_login_service/api/v1/sessions: 
    post:
      description: >-
        Creates a new session and return the jwt generated.
      summary: Create a session
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  default: 'lv@example.com'
                password:
                  type: string
                  default: '*****'

      responses:
        '200':
          description: 'The generated token'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'User logged in successfully.'
                  data:
                    type: object
                    properties:
                      token:
                        type: string
                        default: 'aa.bb.cc'
        '400':
          description: 'Error generating a token, email is missed'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      email: 
                        type: string
                        default: 'email is required'
        '400':
          description: 'Error generating a token, wrong password'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      password: 
                        type: string
                        default: 'Wrong Password'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'
    put:
      description: >-
        Update a session, updating the expiration date to 180s to the current date.
      summary: Update a session

      responses:
        '200':
          description: 'The updated token'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'Token updated successfully.'
                  data:
                    type: object
                    properties:
                      token:
                        type: string
                        default: 'aa.bc.cd'
  /user_registration_service/api/v1/signup: 
    post:
      description: >-
        Creates a new user.
      summary: Create a user
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  default: 'Name'
                surname:
                  type: string
                  default: 'Surna,e'
                email:
                  type: string
                  default: 'lv@example.com'
                password:
                  type: string
                  default: '*****'
                password_confirmation:
                  type: string
                  default: '*****'
                address:
                  type: string
                  default: 'Via Toledo'
                city:
                  type: string
                  default: 'Naples'
                country:
                  type: string
                  default: 'Italy'

      responses:
        '200':
          description: 'User created successfully'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'success'
                  message:
                    type: string
                    default: 'User created successfully'
                  data:
                    type: object
                    properties:                      
                      user:
                        $ref: '#/components/schemas/User'

        '400':
          description: 'Error creating a user, some parameters are missing (e.g. Name)'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      email: 
                        type: string
                        default: 'name is required'
        '400':
          description: 'Error creating a user, some parameters have a wrong format (e.g. email)'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'fail'
                  data:
                    type: object
                    properties:
                      password: 
                        type: string
                        default: 'The email is not valid, please use a real email'
        '500':
          description: 'Server Error'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    default: 'error'
                  code:
                    type: integer
                    default: 500
                  message:
                    type: string
                    default: 'Error'

components:
  schemas:
    AirPollution:
      type: object
      properties:
        lat:
          type: integer
          default: 42.16382
          description: 'lat of the area given'
        lon:
          type: integer
          default: 12.74924
          description: 'lon of the area given'
        aqi:
          type: integer
          description: 'Air quality index of the area given'

    Crowd:
      type: object
      properties:
        currentSpeed:
          type: integer
          default: 15
          description: 'currentSpeed of the street identified'
        freeFlowSpeed:
          type: integer
          default: 19
          description: 'freeFlowSpeed of the street identified'
    Destination:
      type: object
      properties:
        name:
          type: string
          default: 'Tropea'
          description: 'Name of the destination'
        description:
          type: string
          default: 'A beautiful coastal town in Calabria, southern Italy'
          description: 'Description of the destination'
        image_url:
          type: string
          default: 'https://www.touristmaker.com/wp-content/uploads/2020/12/the-cliffside-town-of-tropea-768x1260.jpg'
          description: 'Link to the image of the destination'
        coordinates:
          type: object
          description: 'Coordinates of the destination'
          properties:
            lat:
              type: integer
              default: 42.12453
              description: 'lat of the destination'
            lon:
              type: integer
              default: 12.73528
              description: 'lon of the destination'
    User:
      type: object
      properties:
        name:
          type: string
          default: 'Mario'
          description: 'Name of the user'
        surname:
          type: string
          default: 'Rossi'
          description: 'Surname of the user'
        email:
          type: string
          default: 'lv@example.com'
          description: 'Email of the user'
        password:
          type: string
          default: '*****'
          description: 'Password of the user'
        origin_name:
          type: string
          default: 'Rome, Italy'
          description: 'Address of the user, to be used as origin in the destination search'
        origin_coordinates:
          type: object
          description: 'coordinates of the origin_name'
          properties:
            lat:
              type: integer
              default: 41.890210
              description: 'lat of the origin_name'
            lon:
              type: integer
              default: 12.492231
              description: 'lon of the origin_name'

    Rating:
      type: object
      properties:
        forecast_rating:
          type: integer
          default: 1
          description: 'rating given by the forecast component'
        forecast_description:
          type: string
          default: 'Sunny and Warm'
          description: 'textual description of the forecast_rating'
        crowd_rating:
          type: integer
          default: 1
          description: 'rating given by the traffic component'
        crowd_description:
          type: string
          default: 'Not crowded'
          description: 'textual description of the crowd_rating'
        air_pollution_rating:
          type: integer
          default: 1
          description: 'rating given by the air quality component'
        air_pollution_description:
          type: string
          default: 'Good'
          description: 'textual description of the air_pollution_rating'
        final_rating:
          type: integer
          default: 1
          description: 'final rating obtained combining in a weighted the previous ones'
    Email_check:
      type: object
      properties:
        catch_all:
          type: boolean
          default: false
        deliverable:
          type: boolean
          default: false
        disposable:
          type: boolean
          default: false
        domain:
          type: string
          default: 'gmail.com'
        email_address:
          type: string
          default: 'a.b@gmail.com'
        gibberish:
          type: boolean
          default: false
        spam:
          type: boolean
          default: false
        valid_syntax:
          type: boolean
          default: true
        webmail:
          type: boolean
          default: true
    Forecast:
      type: object
      properties:
        date:
          type: string
          default: '2023-01-01'
        day:
          type: object
        hour:
          type: array
          default: [
                {
                    "time_epoch": 1680213600,
                    "temp_c": 10.6,
                    "condition": {
                        "text": "Overcast",
                        "icon": "//cdn.weatherapi.com/weather/64x64/night/122.png",
                        "code": 1009
                    },
                    "pressure_mb": 1022,
                    "precip_mm": 0,
                    "humidity": 88,
                    "cloud": 97,
                    "will_it_rain": 0,
                    "chance_of_rain": 0,
                    "will_it_snow": 0,
                    "chance_of_snow": 0,
                }]
    Geocode:
      type: object
      properties:
        lat:
          type: integer
          default: 41.890210
        lon:
          type: integer
          default: 12.492231
        display_name:
          type: string
          default: 'Colosseo, Roma'
    Ip_info:
      type: object
      properties:
        city:
          type: string
          default: 'Ashburn'
        country:
          type: string
          default: 'United States'
    Range:
      type: object
      properties:
        origin:
          type: object
          default: {
                "lat": "70.4383707",
                "lon": "20.9935591"
            }
        boundary:
          type: array
          default: [{
                    "latitude": 61.35679,
                    "longitude": 10.28692
                },
                {
                    "latitude": 60.65965,
                    "longitude": 9.04911
                },]